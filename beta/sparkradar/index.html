<!--
Spark Radar
An online radar application for weather lovers.
Made by Tyler.
Programming of the Spark Radar project began in September 2024.
-->

<!DOCTYPE html>
<html>
<head>
    <!--Page title and icon-->
    <title>Spark Radar</title>
    <link rel="icon" type="image/png" href="logo-rounded.png">

    <!--Meta tags...-->
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

    <!--Links to the Leaflet CSS/JS-->
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
    <link href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" rel="stylesheet"/>
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.css" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster/dist/MarkerCluster.Default.css" />
    <script src="https://unpkg.com/leaflet.markercluster/dist/leaflet.markercluster.js"></script>


    <!--Font links-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cabin:ital,wght@0,400..700;1,400..700&display=swap" rel="stylesheet">

    <!--Icon set-->
    <script src="https://kit.fontawesome.com/3e2fc9ce5a.js" crossorigin="anonymous"></script>
    
    <!--CSS-->
    <link rel="stylesheet" href="style.css"></link>

    <!--MapTiler SDK-->
    <script src="https://cdn.maptiler.com/maptiler-sdk-js/v2.0.3/maptiler-sdk.umd.js"></script>
    <link href="https://cdn.maptiler.com/maptiler-sdk-js/v2.0.3/maptiler-sdk.css" rel="stylesheet" />
    <script src="https://cdn.maptiler.com/leaflet-maptilersdk/v2.0.0/leaflet-maptilersdk.js"></script>

    <!--ESRI SDK-->
    <script src="https://unpkg.com/esri-leaflet/dist/esri-leaflet.js"></script>

    <!--Turf lib-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Turf.js/5.1.6/turf.min.js"></script>

    <!--GTAG-->
    <script async src="https://googletagmanager.com/gtag/js?id=G-63D08PM675"></script>
    <script>
        window.datalayer = window.datalayer || [];
        function gtag(){datalayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-63D08PM675');
    </script>


    <!--Open Graph and Twitter Card data-->
    <meta property="og:title" content="Spark Radar"/>
    <meta property="og:description" content="Track the weather like a pro for free. Custom colors, watches, soundings, alerts, and so much more."/>
    <meta property="og:image" content="https://busybird15.github.io/beta/sparkradar/logo-rounded.png"/>
    <meta property="og:url" content="https://busybird15.github.io/beta/sparkradar/"/>
    <meta property="twitter:card" content="summary_large_image"/>
    <meta property="twitter:site" content="@busybird150"/>
    <meta property="twitter:title" content="Spark Radar"/>
    <meta property="twitter:description" content="Track the weather like a pro for free. Custom colors, watches, soundings, alerts, and so much more."/>
    <meta property="twitter:image" content="https://busybird15.github.io/beta/sparkradar/logo-small.png"/>

</head>
<body>
<div>

    <!--Leaflet map-->
    <div id="map"></div>

    <!--Info-->
    <div id="attrib" class="overlay-object"></div>

    <!--Menu opener-->
    <button id="menu-opener" onclick="menuToggle(true); fadeIn('menu-blur')" class="nav-btn overlay-object" style="justify-content: center; width: 40px; height: 40px; transition-duration: 0.5s; background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(3px); -webkit-backdrop-filter: blur(3px);">
        <i class="fa-solid fa-bars" style="font-size: 20px;"></i>
    </button>

    <!--Radar state info-->
    <div id="info" class="overlay-object" style="top: 10px; right: 10px; flex-direction: column; padding: 10px; display: flex; align-items: center; justify-content: center; max-width: 270px; width: calc(100% - 100px);">
        <div style="display: flex; flex-direction: row;"><div id="radarloader" style="margin-right: 20px;" class="lds-ripple-mini"><div></div><div></div></div><p id="radinfo_lna" style="margin: 0px; font-size: large;"><b>CONUS â€¢ LATEST â€¢ </b></p></div>
        <h3 id="photo-prod" onclick="legendclick();" style="display: none; color: #27beffff; margin-top: 0px !important; cursor: pointer; font-weight: bolder; width: 100%; text-align: center; margin: 2px; text-shadow: 0 0 3px #000000ee;">Composite reflectivity</h3>
        
        <select id="prod" style="appearance: none; padding: 5px; color: #27beffff; font-weight: bolder; text-align: center; -webkit-appearance: none; -moz-appearance: none; background: none; border: none; font-size: large; display: block; width: 100%; text-shadow: 0px 0px 6px #464646; font-size: medium; border-radius: 20px;" onchange="setProduct();">
            <option value="conus_cref">Composite Reflectivity</option>
            <option value="conus_bref">Base Reflectivity</option>
        </select>
    </div>

    <div id="radarproducts" class="overlay-object" style="transition: opacity 0.2s !important; opacity: 0; width: calc(100% - 520px); flex-direction: column; max-width: 330px; min-width: 180px; left: 70px; top: 60px; overflow-x: auto; height: calc(100% - 400px); min-height: 200px; max-height: 300px; scrollbar-width: none; padding: 10px; z-index: 999;"></div>

    <!--Menu Blur-->
    <div id="menu-blur" onclick="menuToggle(false); fadeOut('menu-blur')" style="transition: opacity 0.5s !important; border-radius: 0px; opacity: 0; display: none;"></div>

    <!--Menu-->
    <div id="menu" style="transition: opacity 0.5s, transform 0.5s !important; transform: translateX(-300px); opacity: 0;">
        <div style="display: flex; flex-direction: row; justify-content: space-between; align-items: ceter; padding: 10px;">
            <button id="menu-closer" onclick="menuToggle(false); fadeOut('menu-blur')" class="nav-btn" style="border-radius: 20px; background: #ff2121ff;">
                <i class="fa-solid fa-xmark" style="font-size: 16px; "></i>
            </button>
            <button id="sparkgenbtn" onclick="menuToggle(false); convertToSparkgen(true);" class="nav-btn" style="width: auto !important; border-radius: 20px; align-items: center; font-size: medium; font-weight: bold; color: black; display: flex; flex-direction: row; background: #ffcc00ff;">
                SparkGen <p style="margin: 0px; margin-left: 5px; padding: 5px; color: white; background-color: red; border-radius: 20px;">NEW</p>
            </button>
            <p id="insg" style="margin: 5px; font-weight: bold; display: none; font-size: medium; color: #ffcc00ff;">You are in SparkGen</p>
        </div>
        <img id="logo-header" src="logo.png" style="display: flex; width: calc(100% - 20px); height: auto; border-radius: 20px; margin: 10px;">
        <div id="audio-ctrl" style="margin-top: 10px; color: white; background: rgb(50, 50, 50); border-radius: 20px; display: none; flex-direction: column; width: 100%; height: auto;">
            <div style="margin-top: 5px; display: flex; flex-direction: row; align-items: center; justify-content: center;">
                <i class="fa-solid fa-radio" style="color: white; margin-right: 10px; font-size: 20px; color: #27beffff;"></i>
                <p id="audio-title" style="font-size: large; margin: 10px;">WXJ58</p>
            </div>
            <div style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
                <p id="audio-info" style="text-align: center; font-size: small; margin-top: 5px; color: lightgray;">144.550 mHz | 2 listeners</p>
            </div>
            <div style="margin-bottom: 10px; display: flex; flex-direction: row; align-items: center; justify-content: center;">
                <button class="function-btn" onclick="stopPlayer();" style="margin-right: 20px; display: flex; align-items: center; padding: 10px;"><i class="fa-solid fa-stop" style="margin-right: 10px; font-size: 16px;"></i> <b>Stop</b></button>
                <button class="function-btn" id="jumpToLive" style="display: flex; align-items: center; padding: 10px;"><i class="fa-solid fa-forward-fast" style="margin-right: 10px; font-size: 16px;"></i> <b>Jump live</b></button>
            </div>
            <div id="volumectrl" style="margin-bottom: 10px; display: flex; flex-direction: row; align-items: center; justify-content: center;">
                <i class="fa-solid fa-volume-down" style="margin-right: 5px; margin-left: 10px; font-size: 20px; color: #27beffff;"></i>
                <input style="width: 100%;" type="range" id="volumeControl" min="0" max="100" value="80">
                <i class="fa-solid fa-volume-up" style="margin-left: 5px; margin-right: 10px; font-size: 20px; color: #27beffff;"></i>
            </div>
        </div>
        <br>
        <div style="overflow-y: auto; scrollbar-width: none;">
            <!--<div onclick="" style="margin-bottom: 20px;" class="menuitem"><i class="fa-solid fa-cloud-bolt"></i><b>SPC Outlook</b></div>-->
            <div onclick="dialog(true, 'spcoutlook');" class="menuitem"><i class="fa-solid fa-triangle-exclamation"></i><b>SPC Outlook</b></div>
            <div onclick="dialog(true, 'dictionary'); document.getElementById('dictbox').value = ''; doDictSearch('');" style="margin-bottom: 30px;" class="menuitem"><i class="fa-solid fa-book"></i><b>Weather Glossary</b></div>
            <div onclick="dialog(true, 'settings');" class="menuitem"><i class="fa-solid fa-gear"></i><b>Settings</b></div>
            <div onclick="dialog(true, 'shortcuts');" class="menuitem"><i class="fa-solid fa-keyboard"></i><b>Shortcuts</b></div>
            <div onclick="dialog(true, 'appinfo');" class="menuitem"><i class="fa-solid fa-circle-info"></i><b>About</b></div>
            <div onclick="dialog(true, 'about');" style="margin-bottom: 30px;" class="menuitem"><i class="fa-solid fa-circle-question"></i><b>Technical Info</b></div>
            <a style="text-decoration: none;" target="_blank" href="https://discord.com/invite/CTyybFMQrM"><div class="menuitem"><i class="fa-brands fa-discord"></i><b>Discord Server</b></div></a>
            <a style="text-decoration: none;" target="_blank" href="maito:busybird15@mail.com"><div class="menuitem"><i class="fa-solid fa-envelope"></i><b>Email Me</b></div></a>
            <a style="text-decoration: none;" target="_blank" href="https://github.com/BusyBird15/busybird15.github.io"><div class="menuitem"><i class="fa-brands fa-github"></i><b>Github</b></div></a>
        </div>
        <!--<div id="survey" style="margin-top: 10px; color: white; background: rgb(50, 50, 50); border-radius: 20px; display: flex; flex-direction: column; width: 100%; align-items: center; justify-content: center; height: auto;">
            <p style="margin: 5px; margin-top: 10px; text-align: center;">
                <b>We want to hear what you think!</b><br>
                Feel free to take the survey below:
            </p>
        <a href="https://tinyurl.com/sparkradarsurvey-2024" target="_blank" style="text-decoration: none; margin-bottom: 10px;"><button class="function-btn" style="display: flex; align-items: center; padding: 10px;"><i class="fa-solid fa-square-poll-vertical" style="margin-right: 10px; font-size: 16px;"></i> <b>Take the survey</b></button></a>
        </div>-->
    </div>

    <!--Dialog-->
    <div id="dialog" style="transition: opacity 0.5s !important; opacity: 0; width: 100%; height: 100%; display: none; position: absolute; z-index: 15; justify-content: center; align-items: center; top: 0px; left: 0px; background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(3px); -webkit-backdrop-filter: blur(3px);">
        <div id="innerdialog" style="flex-direction: column; transition: scale 0.5s cubic-bezier(0.42, 0, 0.39, 0.98) !important; scale: 70%; padding: 10px; width: 100%; height: calc(100% - 40px); max-width: 550px; max-height: 600px; margin: 10px; border-radius: 20px; background: black; color: white; box-shadow: #0000008c 3px 3px 9px 0px;">
            <div style="display: flex; margin-bottom: 5px; flex-direction: row; align-items: center; justify-content: space-between;">
                <button id="dialog-closer" onclick="dialog(false); saveSettings();" class="nav-btn" style="background: #ff2121ff; border-radius: 20px;">
                    <i class="fa-solid fa-xmark" style="font-size: 16px; "></i>
                </button>
                <p id="dialogTitle" style="border-radius: 20px; background-color: blue; margin: 0px; color: white; padding: 8px 18px; width: 100%; text-align: center; font-weight: bold; font-size: larger; height: 24px; margin-left: 10px;">Severe Thunderstorm Warning</p>
            </div>

            <div id="conditions" style="flex-direction: column; overflow-x: auto; width: 100%; scrollbar-width: none; height: calc(100% - 40px);">
                <div style="display: flex; margin: 20px; flex-direction: row; align-items: center; justify-content: center;">
                    <img style="margin-right: 30px; border-radius: 20px;" width="60px" height="60px" id="weathersimg">
                    <div style="display: flex; flex-direction: column; align-items: flex-sart; justify-content: center;">
                        <h2 id="conditionsbox" style="color: white; font-weight: bold; margin: 0px;">Loading</h2>
                        <h3 id="tempsbox" style="color: white; font-weight: bold; margin: 0px;">--Â°</h3>
                    </div>
                </div>
                <div id="more"></div>
            </div>

            <div id="dictionary" style="flex-direction: column; overflow-x: auto; width: 100%; scrollbar-width: none; height: calc(100% - 40px);">
                <div style="margin: 10px 10px 0px 10px; display: flex; flex-direction: row;">
                    <input type="text" placeholder="Search for a term" id="dictbox" style="width: calc(100% - 20px); transition-duration: 0.3s; font-size: 16px; color: white; background: rgba(255, 255, 255, 0.2); padding: 5px; margin: 5px; padding: 10px; border: none; width: 100%; border-radius: 20px;">
                    <button id="searchbtn" class="searchbuttons" style="padding: 5px 5px 5px 0px;" onclick="doDictSearch(document.getElementById('dictbox').value);"><i class="fa-solid fa-search" style="font-size: 16px; margin: 5px;"></i></button>
                </div>
                <div id="dictres" style="display: flex; flex-direction: column;"></div>
            </div>

            <div id="spcoutlook" style="flex-direction: column; overflow-x: auto; width: 100%; scrollbar-width: none; height: calc(100% - 40px);">
                <div style="margin-top: 5px; display: flex; flex-direction: row; justify-content: center; align-items: center;">
                    <button id="spc1" onclick="loadrisks(1);" class="function-btn" style="border: none; cursor: pointer; width: 100%; margin: 5px; padding: 5px; font-size: medium; border-radius: 20px; background: gray;">Today</button>
                    <button id="spc2" onclick="loadrisks(2);" class="function-btn" style="border: none; cursor: pointer; width: 100%; margin: 5px; padding: 5px; font-size: medium; border-radius: 20px; background: gray;">Day 2</button>
                    <button id="spc3" onclick="loadrisks(3);" class="function-btn" style="border: none; cursor: pointer; width: 100%; margin: 5px; padding: 5px; font-size: medium; border-radius: 20px; background: gray;">Day 3</button>
                </div>
                <div style="display: flex; margin-bottom: 5px; flex-direction: column; align-items: center; justify-content: center;">
                    <div style="margin-top: 10px; display: flex; flex-direction: row; align-items: center; justify-content: center;">
                        <img id="swody1" style="width: 50%; height: auto;" src="https://spc.noaa.gov/partners/outlooks/national/swody1.png">
                        <img id="swody1_TORN" style="width: 50%; height: auto;" src="https://spc.noaa.gov/partners/outlooks/national/swody1_TORN.png">
                    </div>
                    <div id="row2" style="display: flex; flex-direction: row; align-items: center; justify-content: center;">
                        <img id="swody1_HAIL" style="width: 50%; height: auto;" src="https://spc.noaa.gov/partners/outlooks/national/swody1_HAIL.png">
                        <img id="swody1_WIND" style="width: 50%; height: auto;" src="https://spc.noaa.gov/partners/outlooks/national/swody1_WIND.png">
                    </div>
                </div>
                <hr style="margin-top: 20px; margin-bottom: 10px; color: white; width: 100%;">
                <div id="risklevelstats"></div>
                <hr style="margin-bottom: 20px; margin-top: 10px; color: white; width: 100%;">
                <p id="risktext" style="margin-top: 20px; margin: 0px; background: black; margin-bottom: 20px; font-family: Consolas, monospace, sans-serif !important;">
                    Loading...
                </p>
            </div>

            <div id="loader" style="display: none; justify-content: center; align-items: center; flex-direction: column; overflow-x: clip; scrollbar-width: none; height: calc(100% - 40px);">
                <div class="lds-ripple"><div></div><div></div></div>
            </div>

            <div id="settings" style="display: flex; flex-direction: row; overflow-x: clip; scrollbar-width: none; height: calc(100% - 40px);">
                <div style="display: flex; width: 90px; flex-direction: column; justify-content: flex-start; overflow-y: auto; overflow-x: none; scrollbar-width: none;">
                    <button id="settings-general" onclick="settingsmode('settmenu-general', 'settings-general');" class="set-btn" style="margin-top: 10px; background: #27beffff; border-radius: 20px;">
                        <i class="fa-solid fa-gear" style="font-size: 16px;"></i><br>General
                    </button>
                    <button id="settings-map" onclick="settingsmode('settmenu-map', 'settings-map');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-solid fa-map" style="font-size: 16px;"></i><br>Maps
                    </button>
                    <button id="settings-radar" onclick="settingsmode('settmenu-radar', 'settings-radar');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-solid fa-satellite-dish" style="font-size: 16px"></i><br>Radar
                    </button>
                    <button id="settings-alerts" onclick="settingsmode('settmenu-alerts', 'settings-alerts');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-solid fa-triangle-exclamation" style="font-size: 16px;"></i><br>Alerts
                    </button>
                    <button id="settings-storm" onclick="settingsmode('settmenu-storm', 'settings-storm');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-solid fa-cloud-bolt" style="font-size: 16px"></i><br>Storms
                    </button>
                    <button id="settings-radio" onclick="settingsmode('settmenu-radio', 'settings-radio');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-solid fa-radio" style="font-size: 16px"></i><br>Radios
                    </button>
                    <!--<button id="settings-stream" onclick="settingsmode('settmenu-streaming', 'settings-stream');" class="set-btn" style="background: #89999f; border-radius: 20px;">
                        <i class="fa-brands fa-youtube" style="font-size: 16px;"></i>
                    </button>-->
                </div>
                <div style="border-left:1px solid darkgray; height:100%; margin-left: 10px; margin-right: 10px;"></div>
                <div style="width: 100%; overflow-y: auto; scrollbar-width: none; height: 100%;">
                    <div id="settmenu-general" style="flex-direction: column; display: flex;">
                        <p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-bugs setticon" style="font-size: 16px; color: white;"></i><b>Backend Information</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">The info appears in the bottom left corner and reveals what the application is doing.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" id="debugger" onchange="if (document.getElementById('debugger').checked) { document.getElementById('infop').style.display = 'flex' } else { document.getElementById('infop').style.display = 'none' }">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Show debugger
                        </label>
                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-location setticon" style="font-size: 16px; color: white;"></i><b>Current Location</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Show your current location on the radar map. Your location info does not leave your device.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" checked="false" id="location" onchange="showLocation();">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Show my location
                        </label>
                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-download setticon" style="font-size: 16px; color: white;"></i><b>Settings Database</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Download your settings as a backup, or upload an existing backup.</p>
                        <div style="display: flex; flex-direction: row;">
                            <button style="width: max-content; font-weight: bold; margin-left: 20px; margin-bottom: 5px; font-size: medium;" class="function-btn" onclick="settingsManagement('download');"><i class="fa-solid fa-download" style="font-size: 16px; margin-right: 5px;"></i>Download settings</button>
                            <button style="width: max-content; font-weight: bold; margin-left: 20px; margin-bottom: 5px; font-size: medium;" class="function-btn" onclick="settingsManagement('upload');"><i class="fa-solid fa-upload" style="font-size: 16px; margin-right: 5px;"></i>Upload settings</button>
                        </div>
                        <p style="margin: 25px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-rotate setticon" style="font-size: 16px; color: white;"></i><b>Restore Settings</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Reset all settings to their defaults, including custom alert colors.</p>
                        <button style="width: max-content; font-weight: bold; margin-left: 20px; font-size: medium; background: #ff2121ff" class="function-btn" onclick="if (confirm('Reset all settings to default?')) { localStorage.removeItem('SparkRadar_settings'); window.location.reload(); }"><i class="fa-solid fa-rotate" style="font-size: 16px; margin-right: 5px;"></i>Reset to defaults</button>
                    </div>

                    <div id="settmenu-map" style="flex-direction: column; display: none;">
                        <p style="margin: 10px 5px 10px 5px; font-size: large;"><i class="fa-solid fa-map setticon" style="font-size: 16px; color: white;"></i><b>Map Style</b></p>
                        <label style="margin-left: 20px; margin-bottom: 10px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" id="darkmatmp" onchange="setMapType('darkmatmp', map_darkmaterial)">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            <img style="border-radius: 100%; width: 70px; height: 70px;" src="dark_tb.png">
                            <p style="font-size: medium; margin: 0px; margin-left: 15px;">Dark (Default)</p>
                        </label>
                        <label style="margin-left: 20px; margin-bottom: 10px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" id="defaultmp" onchange="setMapType('defaultmp', map_default)">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            <img style="border-radius: 100%; width: 70px; height: 70px;" src="light_tb.png">
                            <p style="font-size: medium; margin: 0px; margin-left: 15px;">Light</p>
                        </label>
                        <label style="margin-left: 20px; margin-bottom: 10px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" id="streetsmp" onchange="setMapType('streetsmp', map_streets)">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            <img style="border-radius: 100%; width: 70px; height: 70px;" src="streets_tb.png">
                            <p style="font-size: medium; margin: 0px; margin-left: 15px;">Streets</p>
                        </label>
                        <div style="display: flex; align-items: center;">
                            <p style="margin: 5px;">Maps provided by </p>
                            <a href="https://maptiler.com/"><img style="transform: translateY(5px);" src="https://api.maptiler.com/resources/logo.svg" alt="MapTiler" width="100" height="30"></a>
                        </div>

                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-cloud-bolt setticon" style="font-size: 16px; color: white;"></i><b>SPC Outlook</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Show or hide the SPC Day 1 Categorical Outlook outline.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" checked="true" id="spctoggle" onchange="spcEnabled = document.getElementById('spctoggle').checked; if (spcEnabled) { loadOutlook(); } else { outlook.clearLayers(); }">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Show outlook
                        </label>
                    </div>

                     <div id="settmenu-radar" style="flex-direction: column; display: none;">
                         <p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-eye setticon" style="font-size: 16px; color: white;"></i><b>Radar opacity</b></p>
                         <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">A higher opacity value means a less transparent radar.</p>
                         <input style="width: calc(100% - 10px);" type="range" min="1" max="100" value="75" class="slider" id="radop" onchange="radarOpacityChange()" title="Radar Opacity">
                     </div>

                    <div id="settmenu-alerts" style="flex-direction: column; display: none;">
                        <!--<p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-star setticon" style="font-size: 16px; color: white;"></i><b>Radar refresh interval</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Choose how often alerts are refreshed from NOAA. This includes the warnings refresh cycle only.</p>
                        <select id="alertrefint" onchange="setAlertRefreshInterval();">
                            <option value="120000">2 Minutes</option>
                            <option value="60000">1 Minute</option>
                            <option value="45000">45 Seconds</option>
                            <option value="30000">30 Seconds</option>
                            <option value="15000">15 Seconds (Recommended)</option>
                            <option value="10000">10 Seconds</option>
                        </select>-->

                        <p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-triangle-exclamation setticon" style="font-size: 16px; color: white;"></i><b>Alert Colors</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Make the radar yours by defining your own alert polygon colors. If there is more than one color option, the alert will flash between the two colors.</p>
                        <div style="margin: 5px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Extreme Wind Warning</p> <input type="color" id="ewwcolor" onchange="changeAlertColors('EWW', document.getElementById('ewwcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#ff00ff"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Tornado Emergency</p> <div style="display: flex; flex-direction: row;"><input type="color" id="torecolor" onchange="changeAlertColors('TORE', document.getElementById('torecolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer; margin-right: 10px;" value="#c940ff"><input type="color" id="torecolor2" onchange="changeAlertColors('TORE2', document.getElementById('torecolor2').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#ff00ff"></div></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">PDS Tornado Warning</p> <div style="display: flex; flex-direction: row;"><input type="color" id="pdstorcolor" onchange="changeAlertColors('PDSTOR', document.getElementById('pdstorcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer; margin-right: 10px;" value="#ff0000"><input type="color" id="pdstorcolor2" onchange="changeAlertColors('PDSTOR2', document.getElementById('pdstorcolor2').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#ff00ff"></div></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Tornado Warning</p> <input type="color" id="torcolor" onchange="changeAlertColors('TOR', document.getElementById('torcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#ff0000"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">PDS Severe Tstorm Warning</p> <div style="display: flex; flex-direction: row;"><input type="color" id="pdssvrcolor" onchange="changeAlertColors('PDSSVR', document.getElementById('pdssvrcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer; margin-right: 10px;" value="#ff0000"><input type="color" id="pdssvrcolor2" onchange="changeAlertColors('PDSSVR2', document.getElementById('pdssvrcolor2').value)"style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#FFA500"></div></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Severe Tstorm Warning</p> <input type="color" id="svrcolor" onchange="changeAlertColors('SVR', document.getElementById('svrcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#FFA500"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Special Weather Statement</p> <input type="color" id="swscolor" onchange="changeAlertColors('SWS', document.getElementById('swscolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#FFFF00"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Flash Flood Emergency</p> <div style="display: flex; flex-direction: row;"><input type="color" id="ffecolor" onchange="changeAlertColors('FFE', document.getElementById('ffecolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer; margin-right: 10px;" value="#00ff00"><input type="color" id="ffecolor2" onchange="changeAlertColors('FFE2', document.getElementById('ffecolor2').value)"style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#008000"></div></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Flash Flood Warning</p> <input type="color" id="ffwcolor" onchange="changeAlertColors('FFW', document.getElementById('ffwcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#008000"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Special Marine Warning</p> <input type="color" id="smwcolor" onchange="changeAlertColors('SMW', document.getElementById('smwcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#A52A2A"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Flood Warning</p> <input type="color" id="fwcolor" onchange="changeAlertColors('FW', document.getElementById('fwcolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#0000FF"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Flood Advisory</p> <input type="color" id="facolor" onchange="changeAlertColors('FA', document.getElementById('facolor').value)" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#6A5ACD"></div>

                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-cloud-bolt setticon" style="font-size: 16px; color: white;"></i><b>SPC Watches</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Show or hide severe thunderstorm and tornado watches issued by the SPC.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" checked="true" id="wwtoggle" onchange="watchesEnabled = document.getElementById('wwtoggle').checked; if (watchesEnabled) { loadWatches(); } else { watches.clearLayers(); }">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Show watches
                        </label>

                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-circle-exclamation setticon" style="font-size: 16px; color: white;"></i><b>Watch Colors</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">As you can change alert colors, you can also change the colors of SPC watches.</p>
                        <div style="margin: 5px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Tornado Watch</p> <input type="color" id="toacolor" onchange="changeWatchColors('TOA', document.getElementById('toacolor').value);" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#FE5859"></div>
                        <div style="margin: 0px 5px 10px 20px; display: flex; flex-direction: row; justify-content: space-between; align-items: center;"><p style="margin: 0px 10px 0px 0px; font-size: medium;">Severe Tstorm Watch</p> <input type="color" id="svacolor" onchange="changeWatchColors('SVA', document.getElementById('svacolor').value);" style="border: none; border-radius: 5px; background: darkgray; cursor: pointer;" value="#516BFF"></div>

                    </div>

                    <div id="settmenu-storm" style="flex-direction: column; display: none;">
                        <p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-bolt setticon" style="font-size: 16px; color: white;"></i><b>Lightning</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Choose at what zoom lightning strikes appear on the map. Lightning strikes are accumulated over the last 60 minutes.</p>
                        <select id="light" onchange="setLightningLevel();">
                            <option value="4">Maximum (Level 4, Extremely laggy)</option>
                            <option value="6">More (Level 6, Laggy)</option>
                            <option value="9" selected="selected">Regular (Level 9, Recommended, Minimal lag)</option>
                            <option value="10">Less (Level 10, No lag)</option>
                            <option value="11">Least (Level 11, No lag)</option>
                            <option value="20">Never show lightning</option>
                        </select>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium;"><b>Note:</b> At the moment, the lightning data source has stopped running. Spark Radar is in the process of partering with a new data source.</p>

                        <p style="margin: 30px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-cloud-bolt setticon" style="font-size: 16px; color: white;"></i><b>Storm Centers</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Turns storm centers on or off.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" checked="true" id="stormcentertoggle" onchange="stormCentersOn = document.getElementById('stormcentertoggle').checked; if (stormCentersOn) { loadStormCenters(); } else { stormCenters.clearLayers(); }">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Enable storm centers
                        </label>
                    </div>

                    <div id="settmenu-radio" style="flex-direction: column; display: none;">
                        <p style="margin: 10px 5px 5px 5px; font-size: large;"><i class="fa-solid fa-radio setticon" style="font-size: 16px; color: white;"></i><b>Weather Radios</b></p>
                        <p style="margin: 5px 5px 10px 15px; font-size: medium; color: lightgray;">Turn the weather radio listener on or off. Also shows or hides radio markers on the map.</p>
                        <label style="margin-left: 20px; font-size: medium;" class="checkbox-container">
                            <input type="checkbox" checked="true" id="radiotoggle" onchange="weatherRadioVisible = document.getElementById('radiotoggle').checked; if (weatherRadioVisible) { addWeatherRadios(); } else { stopPlayer(); radios.clearLayers(); }">
                            <span class="checkmark" style="margin-right: 10px;"></span>
                            Enable radios
                        </label>
                    </div>

                    <div id="settmenu-streaming" style="flex-direction: column; display: none;">
                        <p style="margin: 5px 5px 10px 5px; font-size: medium;">Streaming settings coming soon!</p>
                     </div>
                </div>
            </div>

            <div id="appinfo" style="height: calc(100% - 50px); margin-top: 10px; align-items: center; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <p style="margin: 10px 5px 5px 5px; font-size: large;"><b>ðŸ‘‹ Hi there!</b></p>
                <p style="margin: 5px 5px 10px 5px; font-size: medium;">Thanks for checking out my radar. Spark Radar was a project I started in 2024 because I love tracking the weather and programming. I made the entire thing open source because finding the radar data was really hard to do. You can check out the source code in <a class="credit" href="https://github.com/BusyBird15/busybird15.github.io/">this repo</a>.</p>
                <p style="margin: 20px 5px 5px 5px; font-size: large;"><b>How does it work?</b></p>
                <p style="margin: 5px 5px 10px 5px; font-size: medium;">The principle of Spark Radar is actually very simple. I found a tile server used by the NWS's radar. After passing it a bounding box and station, it returns an image which simply gets placed on the map!</p>
                <p style="margin: 20px 5px 5px 5px; font-size: large;"><b>Credits</b></p>
                <p style="margin: 5px 5px 10px 5px; font-size: medium;">The following are the services and sources which the radar gets data from:</p>
                <p style="margin: 5px 5px 10px 15px; font-size: medium; width: calc(100% - 40px); text-align: left;"><b>Radar Images: </b><a href="https://opengeo.ncep.noaa.gov" target="_blank" class="credit">NOAA's OPENGEO Server</a><br>
                    <b>Radar Info and Stations:</b> <a href="https://www.weather.gov/documentation/services-web-api#/" target="_blank" class="credit">NWS API</a><br>
                    <b>Alerts:</b> <a href="https://www.weather.gov/documentation/services-web-api#/" target="_blank" class="credit">NWS API</a><br>
                    <b>Watches:</b> <a href="https://www.mesonet.agron.iastate.edu/request/gis/spc_watch.phtml" target="_blank" class="credit">The IEM WW Archive</a><br>
                    <b>SPC Outlooks:</b> <a href="https://www.spc.noaa.gov/products/outlook/day1otlk_cat.nolyr.geojson" target="_blank" class="credit">NWS SPC GeoJSON</a><br>
                    <b>Search Results:</b> <a href="https://geocode.maps.co" target="_blank" class="credit">Geocode</a><br>
                    <b>Weather Radios:</b> <a href="https://weatherradio.org" target="_blank" class="credit">GWES WeatherRadio</a><br>
                </p>
                <p style="margin: 20px 5px 5px 5px; font-size: large;"><b>Honorable Mentions</b></p>
                <p style="margin: 5px 5px 10px 5px; font-size: medium;">The following people have helped make the radar or have helped me with finding data:</p>
                <p style="margin: 5px 5px 10px 15px; font-size: medium; width: calc(100% - 40px); text-align: left;"><b>Wxtership</b> (Owner of Xtreme Weather Discord) and <a href="https://radar.xtremewx.com" target="_blank" class="credit">his radar</a><br><b>SteepAtticStairs</b> (Creator of <a href="https://atticradar.steepatticstairs.net" target="_blank" class="credit">AtticRadar</a>)<br><b>Dan Paulat</b> (Creator of SupercellWX)</p>
            </div>

            <div id="about" style="height: calc(100% - 50px); margin-top: 10px; flex-direction: column; align-items: center; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <p style="margin: 10px 5px 5px 5px; font-size: large;"><b>Version:</b>v2.0 BETA (v1.1)</p>
                <p style="margin: 10px 5px 5px 5px; font-size: large;"><b>Date:</b> Apr 1, 2025</p>
                <br>
            </div>

            <div id="alertinfo" style="height: calc(100% - 50px); margin-top: 10px; flex-direction: column; font-family: Consolas; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
            </div>

            <div id="soundingviewer" style="height: calc(100% - 50px); margin-top: 10px; flex-direction: column; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <img id="sounding" style="background: white; border-radius: 5px; margin-top: 10px;">
            </div>

            <div id="prodviewer" style="height: calc(100% - 50px); margin-top: 10px; flex-direction: column; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <p id="produc" style="color: white; font-family: Consolas, monospace, 'Cabin', sans-serif; font-size: medium;"></p>
            </div>

            <div id="radarhelp" style="color: white; height: calc(100% - 50px); margin-top: 10px; flex-direction: column; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <h2 style="margin: 5px; margin-bottom: 15px;">Radar Legend Information</h2>
                <p style="font-size: large; margin: 0px; font-weight: bold;">National (CONUS) Products</p>
                <p style="font-size: medium; margin: 5px;"><b>Composite Refletctivity </b><em>(cref): </em>Max reflectivity value found at that point among all radar tilts.</p>
                <p style="font-size: medium; margin: 5px;"><b>Base Refletctivity </b><em>(bref): </em>Reflectivity value at base tilt (0.5deg). This is your common radar.</p>
                <p style="font-size: medium; margin: 5px;"><b>Echo Tops </b><em>(neet_v18): </em>Estimated top of a storm, where the precipitation stops in the atmosphere. Can indicate stronger convection.</p>
                <p style="font-size: medium; margin: 5px; margin-bottom: 25px;"><b>Precipitation Type </b><em>(pcpn_typ): </em>Digital estimation of falling precipitation.<br>WS: Warm Stratiform rain; S: Snow; C: Convective rain; H: Hail; CS: Cool Stratiform rain; ST: Tropical/Stratiform rain mix; CT: Tropical/Convective rain mix</p>
    
                <p style="font-size: large; margin: 0px; font-weight: bold;">Station (WSR-88D) Products</p>
                <p style="font-size: medium; margin: 5px;"><b>Base Refletctivity: </b>Reflectivity value at base tilt (0.5deg). This is your common radar.</p>
                <p style="font-size: medium; margin: 5px;"><b>Base Velocity: </b>Shows the motion and speed of particles; indicates wind speed and direction. Can identify a tornado.</p>
                <p style="font-size: medium; margin: 5px;"><b>Digital Hydrometer Classification: </b>Digital estimation of falling precipitation. <br>BI: Biological;  GC: Clutter;  IC: Ice Crystals;  DS: Dry Snow;  WS: Wet Snow;  RA: Rain;  HR: Heavy Rain;  BD: Big Drops;  GR: Graupel;  HA: Hail-Rain;  UK: Unknown</p>
                <p style="font-size: medium; margin: 5px; margin-bottom: 25px;"><b>Rainfall Accumulation: </b>Digital estimation of how much rain has fallen over the past hour or from a storm system.</p>
            
                <p style="font-size: medium; margin: 5px;"><b>More info: </b><a href="https://www.weather.gov/radarfaq">weather.gov/radarfaq</a></p>

            </div>

            <div id="shortcuts" style="color: white; height: calc(100% - 50px); margin-top: 10px; flex-direction: column; overflow-y: auto; display: none; scrollbar-width: none; flex-direction: column;">
                <br>
                <div style="display: flex; flex-direction: column;">
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin: 10px;">
                        <h3 style="margin: 0px;">D</h3>
                        <p style="margin: 0px;">Open the drawing menu</p>
                    </div>
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin: 10px;">
                        <h3 style="margin: 0px;">R</h3>
                        <p style="margin: 0px;">Refresh</p>
                    </div> 
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin: 10px;">
                        <h3 style="margin: 0px;">SHIFT + A</h3>
                        <p style="margin: 0px;">Toggle alerts</p>
                    </div>
                    <div style="display: flex; flex-direction: row; align-items: center; justify-content: space-between; margin: 10px;">
                        <h3 style="margin: 0px;">SHIFT + R</h3>
                        <p style="margin: 0px;">Toggle radars</p>
                    </div> 
                </div>                
            </div>
        </div>
    </div>

    <!--WFO Products dialog-->
    <div id="wfodialog" style="transition: opacity 0.5s !important; opacity: 0; width: 100%; height: 100%; display: none; position: absolute; z-index: 14; justify-content: center; align-items: center; top: 0px; left: 0px; background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);">
        <div id="innerwfodialog" style="transition: scale 0.5s cubic-bezier(0.42, 0, 0.39, 0.98) !important; scale: 70%; flex-direction: column; overflow-y: auto; scrollbar-width: none; padding: 10px; width: 100%; height: calc(100% - 40px); max-width: 550px; max-height: 600px; margin: 10px; border-radius: 20px; background: black; color: white; box-shadow: #0000008c 3px 3px 9px 0px;">
            <button id="wfo-dialog-closer" onclick="wfodialog(false);" class="nav-btn" style="background: #ff2121ff; border-radius: 20px;">
                <i class="fa-solid fa-xmark" style="font-size: 16px; "></i>
            </button><br>

            <div style="display: flex; margin-bottom: 20px; flex-direction: row; align-items: center; justify-content: center;">
                <img style="margin-right: 30px; border-radius: 20px;" width="60px" height="60px" id="weatherimg">
                <div style="display: flex; flex-direction: column; align-items: flex-sart; justify-content: center;">
                    <h2 id="conditionbox" style="color: white; font-weight: bold; margin: 0px;">Loading</h2>
                    <h3 id="tempbox" style="color: white; font-weight: bold; margin: 0px;">--Â°</h3>
                </div>
            </div>

            <div id="prodchooser" style="display: flex; flex-direction: column;">
                <div onclick="dialog(true, 'soundingviewer');" style="margin-top: 20px;" class="menuitem" id="soundingpick"><i class="fa-solid fa-chart-line"></i><b>Sounding</b></div>
                <div onclick="dialog(true, 'prodviewer', 'RDA');" class="menuitem"><i class="fa-solid fa-satellite-dish"></i><b>Radar Status Message</b></div>
                <div onclick="dialog(true, 'prodviewer', 'AFD');" class="menuitem"><i class="fa-solid fa-comments"></i><b>AFD (Area Forecast Discussion)</b></div>
                <div onclick="dialog(true, 'prodviewer', 'PNS');" class="menuitem"><i class="fa-solid fa-message"></i><b>PNS (Public Information Statement)</b></div>
            </div>
        </div>
    </div>

    <!--SparkGen dialog-->
    <div id="sgdialog" style="transition: opacity 0.5s !important; opacity: 0; width: 100%; height: 100%; display: none; position: absolute; z-index: 14; justify-content: center; align-items: center; top: 0px; left: 0px; background: rgba(0, 0, 0, 0.2); backdrop-filter: blur(5px); -webkit-backdrop-filter: blur(5px);">
        <div id="innersgdialog" style="transition: scale 0.5s cubic-bezier(0.42, 0, 0.39, 0.98) !important; justify-content: space-between; scale: 70%; flex-direction: column; overflow-y: auto; scrollbar-width: none; padding: 10px; width: 100%; height: calc(100% - 40px); max-width: 550px; max-height: 600px; margin: 10px; border-radius: 20px; background: black; color: white; box-shadow: #0000008c 3px 3px 9px 0px;">
            <button id="sgdialog-closer" onclick="sgdialog(false);" class="nav-btn" style="background: #ff2121ff; border-radius: 20px;">
                <i class="fa-solid fa-xmark" style="font-size: 16px; "></i>
            </button>
            <div id="tut-1" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: flex;">
                <h2>Welcome to SparkGen!</h2>
                <p style="margin: 0px;">SparkGen is a powerful tool to issue weather alerts on your own. It's completely free, and performs many of the same jobs as AWIPS WarnGen.</p>
                <br>
                <p style="margin: 0px;">Click next to run through the tutorial, or skip if you want to explore on your own.</p>
            </div>

            <div id="tut-2" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: none;">
                <h2>(1/4) Creating watches</h2>
                <p style="margin: 0px;">Watches are extremely easy to create. Simply click a county and it will be included.</p>
                <br>
                <img src="https://i.ibb.co/kV9jv5rD/Screencast-from-2025-02-13-11-39-44.gif" style="width: 100%;">
                <br>
                <p style="margin: 0px;">Click a county again and it will be excluded.</p>
            </div>

            <div id="tut-3" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: none;">
                <h2>(2/4) Creating warnings</h2>
                <p style="margin: 0px;">To create a warning, click the polygon button on the toolbar. Click to place a vertex. After three vertices are on the map, a polygon will appear.</p>
                <br>
                <img src="https://i.ibb.co/3mkySMF0/Screencast-from-2025-02-14-11-51-39-1.gif" style="width: 100%;">
                <br>
                <p style="margin: 0px;">You can click any vertex to delete it, or drag a vertex to move it.</p>
                <br>
                <p style="margin: 0px;">When you are finished, click the polygon button again to lock it.</p>
            </div>

            <div id="tut-4" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: none;">
                <h2>(3/4) Naming alerts and advanced features</h2>
                <p style="margin: 0px;">Click the edit button to change alert text.</p>
                <br>
                <img src="https://i.ibb.co/KpFvyw2H/Screencast-from-2025-02-13-11-47-11.gif" style="width: 100%;">
                <br>
                <p style="margin: 0px;">Leave any box blank to hide the text.</p>
                <br>
                <p style="margin: 0px;"><b>Tip:</b> Click the trash can in the toolbar to clear any drawn polygons and reset all counties.</p>
            </div>

            <div id="tut-5" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: none;">
                <h2>(4/4) Issuing alerts</h2>
                <p style="margin: 0px;">Click the green camera button to enter photo mode. You can then screenshot your alert map.</p>
                <br>
                <p style="margin: 0px;"></p>
            </div>

            <div id="editor" style="margin: 10px; justify-content: flex-start; flex-direction: column; display: none; overflow-y: auto; height: 100%;"><br>
                <h3 style="margin: 0px; width: 100%; text-align: center;">Title text</h3>
                <input type="text" value="Weather Alert Title" placeholder="Leave blank to hide" id="alerttitle" style="transition-duration: 0.3s; font-size: 16px; color: white; background: rgba(255, 255, 255, 0.2); padding: 5px; margin: 5px; border: none; width: calc(100% - 20px); border-radius: 7px;">
                <br>
                <h3 style="margin: 0px; width: 100%; text-align: center;">Subtitle line 1</h3>
                <input type="text" value="Subtitle line 1" placeholder="Leave blank to hide" id="subtext1" style="transition-duration: 0.3s; font-size: 16px; color: white; background: rgba(255, 255, 255, 0.2); padding: 5px; margin: 5px; border: none; width: calc(100% - 20px); border-radius: 7px;">
                <br>
                <h3 style="margin: 0px; width: 100%; text-align: center;">Subtitle line 2</h3>
                <input type="text" value="Subtitle line 2" placeholder="Leave blank to hide" id="subtext2" style="transition-duration: 0.3s; font-size: 16px; color: white; background: rgba(255, 255, 255, 0.2); padding: 5px; margin: 5px; border: none; width: calc(100% - 20px); border-radius: 7px;">
                <br>
                <h3 style="margin: 0px; width: 100%; text-align: center;">Discussion text</h3>
                <textarea placeholder="Leave blank to hide" id="discussiontext" style="resize: vertical; transition-duration: 0.1s; font-size: 16px; color: white; background: rgba(255, 255, 255, 0.2); padding: 5px; margin: 5px; border: none; width: calc(100% - 20px); border-radius: 7px;"></textarea>
                <br>
            </div>

            <div id="styles" style="scrollbar-width: none; margin: 10px; justify-content: flex-start; flex-direction: column; display: none; overflow-y: auto; height: 100%;"><br>
                <div id="stylepresets" style="scrollbar-width: none; width: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                </div>
                <br>
                <button style="width: max-content; font-weight: bold; margin-left: 10px; margin-bottom: 5px; font-size: medium;" class="function-btn" onclick="uploadstyles();"><i class="fa-solid fa-plus" style="font-size: 16px; margin-right: 5px;"></i>New style</button>
                <button style="width: max-content; font-weight: bold; margin-left: 10px; margin-bottom: 5px; font-size: medium;" class="function-btn" onclick="uploadstyles();"><i class="fa-solid fa-upload" style="font-size: 16px; margin-right: 5px;"></i>Upload a styleset JSON</button>
            </div>

            <div id="tut-advance" style="display: flex; flex-direction: row; justify-content: space-between; align-items: ceter; padding: 10px;">
                <button id="menu-closer" onclick="sgdialog(false);" class="nav-btn" style="border-radius: 20px; align-items: center; font-size: medium; font-weight: bold; color: white; display: flex; flex-direction: row; background: #ff2121ff;">
                    Skip
                </button>
                <button onclick="advanceSgTutorial();" class="nav-btn" style="border-radius: 20px; align-items: center; font-size: medium; font-weight: bold; color: white; display: flex; flex-direction: row; background: #2a7fffff;">
                    Next
                </button>
            </div>
        </div>
    </div>

    <!--Location Finder-->
    <div class="overlay-object" id="searchbox" style="height: 40px; padding: 0px; padding-left: 3px; padding-right: 3px; display: flex; top: 10px; left: 60px; width: calc(100% - 400px); max-width: 350px; min-width: 200px; z-index: 4;">
        <button onclick="document.getElementById('results').style.opacity = 0; setTimeout(() => document.getElementById('results').style.display = 'none', 500); document.getElementById('textbox').value = '';" class="searchbuttons" style="padding: 5px 0px 5px 5px;"><i class="fa-solid fa-xmark" style="font-size: 16px; margin: 5px;"></i></button>
        <input type="text" placeholder="Find a place" id="textbox" style="transition-duration: 0.3s; background: transparent; font-size: 16px; color: white; padding: 5px; margin: 5px; border: none; width: 100%; border-radius: 7px;">
        <button id="searchbtn" class="searchbuttons" style="padding: 5px 5px 5px 0px;" onclick="doLocSearch(document.getElementById('textbox').value);"><i class="fa-solid fa-search" style="font-size: 16px; margin: 5px;"></i></button>
    </div>
    <div id="results" class="overlay-object" style="transition: opacity 0.2s !important; opacity: 0; width: calc(100% - 415px); flex-direction: column; max-width: 335px; min-width: 180px; left: 60px; top: 60px; overflow-x: auto; height: calc(100% - 400px); min-height: 200px; max-height: 300px; scrollbar-width: none; padding: 10px; z-index: 999;"></div>

    <p id="infop" style="display: none; transition-duration: 0.2s; z-index: 100; margin: 0px; font-size: large; bottom: 10px; left: 10px; position: absolute; color: black;">Loading radar...</p>

    <!--Map alert notifier-->
    <div class="overlay-object" style="display: none; right: 10px; bottom: 30px; z-index: 999;">
        <div id="alertcontent" style="padding: 10px;">
            <div style="display: flex; background: magenta; color: black; padding: 5px; border-radius: 5px;"><b>PDS Severe Thunderstorm Warning</b></div>
        </div>
    </div>

    <!--Map text attribution-->
    <p id="textattr" style="position: absolute; bottom: 45px; right: 10px; z-index: 9; font-size: small; color: white; margin: 0px;">&copy;<a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> and &copy;<a href="https://maptiler.com">MapTiler</a></p>

    <!--Radar Legend-->
    <img id="radarlegend" onclick="dialog(true, 'radarhelp')" style="cursor: pointer; position: absolute; border-radius: 20px; z-index: 9; right: 10px; bottom: 10px;" src="https://weather.gov/images/nws/radarfaq/BDHC_CT.png">

    <!--Canvas for drawing-->
    <canvas id="drawing" style="background: none; display: none; cursor: crosshair; position: absolute; top: 0px; left: 0px; width: 100%; height: 100%; z-index: 101;" style="cursor: crosshair;"></canvas>

    <!--Toolbar-->
    <div class="overlay-object" id="toolbar" style="border-radius: 20px; padding-bottom: 5px; flex-direction: column; align-items: center; justify-content: center; position: absolute; bottom: 10px; left: 10px; z-index: 8; height: auto; width: auto;">
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px; display: none; background-color: #00af00ff; color: white;" title="Photo mode" id="pmode" onclick="photomode();"><i class="fa-solid fa-camera" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px; display: none;" title="Draw a polygon" id="polydraw" onclick="polydraw()"><i class="fa-solid fa-draw-polygon" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px; display: none;" title="Change styles" id="styler" onclick="styles();"><i class="fa-solid fa-palette" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px; display: none;" title="Clear map" id="clearmap" onclick="clearmap()"><i class="fa-solid fa-trash" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 20px 5px; display: none; background-color: #ff2121ff; color: white;" title="Exit SparkGen" id="sparkgenexit" onclick="convertToSparkgen(false);"><i class="fa-solid fa-arrow-right-from-bracket" style="font-size: 16px; transform: rotate(180deg);"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px;" title="[R] Refresh" onclick="mapEvents += 1; addRadarToMap(radarStation); loadAlerts(); loadWatches(); loadOutlook();"><i class="fa-solid fa-refresh" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px;" title="Go to my location" onclick="if(outermarker) {map.flyTo([nowlat, nowlon], 10);}"><i class="fa-solid fa-location" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px;" title="[D] Drawing tools" onclick="toggleDrawing(true);"><i class="fa-solid fa-pencil" style="font-size: 16px;"></i></button>
        <button class="toolbtn selected_toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px; display: block; background-color: white; color: black;" title="[SHIFT + A] Toggle alerts" id="alerttoggle" onclick="toggleAlerts();"><i class="fa-solid fa-circle-exclamation" style="font-size: 16px;"></i></button>
        <button class="toolbtn selected_toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px 5px 0px 5px;" title="[SHIFT + R] Turn radar stations on/off" onclick="toggleRadars();"id="radarstogg"><i class="fa-solid fa-satellite-dish" style="font-size: 16px;"></i></button>
    </div>

    <!--Drawing toolbar-->
    <div class="overlay-object" id="drawingtoolbar" style="border-radius: 20px; padding: 5px; align-items: center; justify-content: center; position: absolute; top: 10px; left: 10px; z-index: 102; height: auto; width: auto;">
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px;" title="Close" onclick="toggleDrawing(false)"><i class="fa-solid fa-xmark" style="font-size: 16px;"></i></button>
        <button class="toolbtn" style="transition-duration: 0.2s; width: 35px; height: 35px; margin: 5px; margin-right: 15px;" title="Clear" onclick="ctx.clearRect(0, 0, canvas.width, canvas.height);"><i class="fa-solid fa-trash" style="font-size: 16px;"></i></button>
        <button class="drawingtoolbtn" id="blue" style="transition-duration: 0.2s; border-radius: 20px; width: 35px; height: 35px; margin: 5px; background: #27beffff; border: none;" onclick="setPenColor('#27beffff'); setSelectedColor('blue');"><i class="fa-regular fa-circle-dot" style="color: lightgray; font-size: 16px;"></i></button>
        <button class="drawingtoolbtn" id="red" style="transition-duration: 0.2s; border-radius: 20px; width: 35px; height: 35px; margin: 5px; background: #ff2121ff; border: none;" onclick="setPenColor('#ff2121ff'); setSelectedColor('red');"></button>
        <button class="drawingtoolbtn" id="green" style="transition-duration: 0.2s; border-radius: 20px; width: 35px; height: 35px; margin: 5px; background: #00af00ff; border: none;" onclick="setPenColor('#00af00ff'); setSelectedColor('green');"></button>
        <button class="drawingtoolbtn" id="white" style="transition-duration: 0.2s; border-radius: 20px; width: 35px; height: 35px; margin: 5px; background: #ffffffff; border: none;" onclick="setPenColor('#ffffffff'); setSelectedColor('white');"></button>
        <button class="drawingtoolbtn" id="black" style="transition-duration: 0.2s; border-radius: 20px; width: 35px; height: 35px; margin: 5px; background: #000000ff; border: none;" onclick="setPenColor('#000000ff'); setSelectedColor('black');"></button>
    </div>

    <!--Black screen for pointless transitions-->
    <div id="black-overlay"><h2 style="color: white;">Loading...</h2></div>

    <!--SparkGen alert info box-->
    <div id="sginfo" class="overlay-object" style="top: 10px; left: 10px; flex-direction: column; padding: 10px; display: none; align-items: flex-end; justify-content: flex-start; width: calc(100% - 350px); max-width: 350px; min-width: 100px;">
        <div style="display: flex; width: 100%; flex-direction: row; align-items: center; justify-content: space-between;">
            <button id="sg_menu" onclick="menuToggle(true);" class="nav-btn" style="border-radius: 20px; box-shadow: none; transition-duration: 0.5s; background: transparent;">
                <i class="fa-solid fa-bars" style="color: rgba(255, 255, 255, 0.4); font-size: 16px;"></i>
            </button>
            <h3 id="alerttitletext" class="easfont" style="width: 100%; margin: 0px; font-weight: bold; text-align: center;">Weather Alert Title</h3>
            <button id="sg_editor" onclick="sgdialog(true, 'editor')" class="nav-btn" style="border-radius: 20px; box-shadow: none; transition-duration: 0.5s; background: transparent;">
                <i class="fa-solid fa-pen-to-square" style="color: rgba(255, 255, 255, 0.4); font-size: 16px;"></i>
            </button>
        </div>
        <h4 id="sub1" class="easfont" style="font-weight: bold; width: 100%; margin: 0px; text-align: center;">Subtitle 1</h4>
        <h4 id="sub2" class="easfont" style="font-weight: bold; width: 100%; margin: 0px; text-align: center;">Subtitle 2</h4>
        <p id="disc" class="easfont" style="width: 100%; margin: 0px; text-align: left;"></p>
    </div>
</div>
</body>

<!--Add JS after elements are added-->
<script src="script.js"></script>

</html>